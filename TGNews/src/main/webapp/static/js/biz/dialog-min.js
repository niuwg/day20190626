namespace("showDialog");define(function(){var M=milo,oIfrBg,fixIECenter,oOverLay,popType='',fMsgClose=null,fixOverlay=null,dialogElement=null,lastFocus=null,focusHandle=null,escCloseHandle=null,bOverlay=false,isLongPopBox=false,dialogOpen=false,oBw=M.browser,isIE=oBw.msie,bVsn=oBw.version,isIE6=isIE&&bVsn=='6.0',isIE9=isIE&&bVsn=='9.0',isSafari=oBw.safari,oWin=window,oDoc=document,oBody=oDoc.body,oDel=oDoc.documentElement,IFRAME_ID='_PopupIframe_',MESSAGE_ID='_PopupMsg_',OVERLAY_ID='_overlay_';var c={show:function(p){var a=(typeof(p)==='object')?p:{},_sAuto='auto';this.id=a.id||null;this.bgcolor=a.bgcolor||'#111';this.opacity=a.opacity||70;this.src=a.src||null;this.fixed=a.fixed||false;this.iTop=a.iTop||_sAuto;this.iWidth=a.iWidth||_sAuto;this.iHeight=a.iHeight||_sAuto;this.sMsg=a.sMsg||null;this.sClass=a.sClass||null;this.sStyles=a.sStyle||'padding:10px;border:4px solid #dedede;background-color:#fff';this.sTime=a.sTime||null;this.delayPop=a.delayPop||false;this.sPzIndex=a.PopzIndex||9999;this.isNoAccessible=a.isNoAccessible||false;if(this.sPzIndex<9){this.sPzIndex=9}this.onPopupCallback=a.onPopupCallback||null;this.onCloseCallback=a.onCloseCallback||null;this.hasFrame=a.bFrame||false;if(typeof(p)=="string"&&p!=null&&p!=''){this.id=p}if(arguments.length==4){this.src=arguments[0];this.iWidth=arguments[1];this.iHeight=arguments[2]}if(this.id==null&&this.src==null&&this.sMsg==null){return}if(dialogOpen){this.hide({isNoCloseOverLay:true})}if(this.src!=null){this.id=IFRAME_ID;popType='iframe';return this.popupInit()}if(this.sMsg!=null){this.id=MESSAGE_ID;popType='message';return this.popupInit()}if(this.id!=null){dialogElement=M.g(this.id);popType='dialog';return this.popupInit()}},popupInit:function(){var b=this.onPopupCallback,_zIndex=this.sPzIndex,_that=this,_oIfrWrap,_oIframe,_oMsg,_class,_length,_msgCloseTime;if(typeof(b)==='function'){b()}if(oOverLay===undefined){oOverLay=M.g(OVERLAY_ID)}if(!bOverlay){if(oOverLay){M.setStyle(oOverLay,{backgroundColor:this.bgcolor,zIndex:_zIndex-1,display:'block'})}else{this.overlay()}}if(popType==='iframe'){if(!M.g(IFRAME_ID)){_oIfrWrap=oDoc.createElement('div');oOverLay.parentNode.insertBefore(_oIfrWrap,oOverLay)}else{_oIfrWrap=M.g(IFRAME_ID).parentNode}_oIfrWrap.style.display='none';_oIframe=oDoc.createElement('iframe');_oIframe.setAttribute('allowtransparency','true');_oIframe.setAttribute('scrolling','no');_oIframe.setAttribute('frameborder','0');_oIframe.setAttribute('height',this.iHeight);_oIframe.setAttribute('width',this.iWidth);_oIframe.setAttribute('id',IFRAME_ID);_oIframe.src=this.src;if(_oIframe.attachEvent){_oIframe.attachEvent('onload',function(){_that.ifrAutoHeight(_oIframe)})}else{_oIframe.onload=function(){_that.ifrAutoHeight(_oIframe)}}if(!this.delayPop){_oIfrWrap.style.display='block'}_oIfrWrap.innerHTML='';_oIfrWrap.appendChild(_oIframe);dialogElement=_oIfrWrap}if(popType==='message'){if(!M.g(MESSAGE_ID)){_oMsg=oDoc.createElement('div');_oMsg.setAttribute('id',MESSAGE_ID);oOverLay.parentNode.insertBefore(_oMsg,oOverLay)}else{_oMsg=M.g(MESSAGE_ID)}_oMsg.style.cssText=this.sStyles;if(this.sClass!=null){_class=isIE?'className':'class';_oMsg.setAttribute(_class,this.sClass)}_oMsg.style.display='none';_oMsg.innerHTML=this.sMsg;if(!this.delayPop){_oMsg.style.display='block'}if(this.sTime!=null){if(!dialogOpen){clearTimeout(_msgCloseTime)}_msgCloseTime=setTimeout(function(){_that.hide()},this.sTime)}else{fMsgClose=function(e){var a;e=e||oWin.event;a=e.target||e.srcElement;if(a.id===OVERLAY_ID){M.stopPropagation(e);_that.hide()}};M.addEvent(oOverLay,'click',fMsgClose)}dialogElement=_oMsg}if(this.delayPop){dialogElement.style.display='none'}else{dialogElement.style.display='block'}M.setStyle(dialogElement,{visibility:'visible',position:'absolute',zIndex:_zIndex,left:'50%',top:'50%'});dialogElement.setAttribute('role','dialog');dialogElement.tabIndex=-1;if(!this.isNoAccessible){focusHandle=function(e){var a;e=e||oWin.event;a=e.target||e.srcElement;if(dialogOpen&&!dialogElement.contains(a)){M.stopPropagation(e);M.setStyle(dialogElement,{display:'block',visibility:'visible'});setTimeout(function(){try{if(dialogElement&&dialogElement.offsetHeight>0){dialogElement.focus()}}catch(e){}},250)}};lastFocus=oDoc.activeElement;oDoc.onfocus=focusHandle;if(oDoc.addEventListener){oDoc.addEventListener('focus',focusHandle,true)}else{oDoc.onfocusin=focusHandle}escCloseHandle=function(e){var a;e=e||oWin.event;a=e.keyCode||e.which;if(dialogOpen&&a==27&&!this.isNoAccessible){_that.hide()}};M.addEvent(oDoc,'keyup',escCloseHandle,true)}if(!this.delayPop){this.adjust()}},popup:function(){var a=dialogElement,_oIfrWrap;if(this.delayPop){if(popType==='iframe'){_oIfrWrap=M.g(IFRAME_ID).parentNode;_oIfrWrap.style.display='block'}a.style.display='block'}this.adjust()},adjust:function(){var a=M.getWinHeight(),_imh=M.getMaxH(),_rt=null,_st=null,_that=this,_obj=dialogElement,_iw,_ih,_iTop,_iPh;if(oOverLay===undefined){oOverLay=M.g(OVERLAY_ID)}if(_obj){_iw=_obj.offsetWidth;_ih=_obj.offsetHeight;if(this.fixed){if(M.isInt(this.iTop)){M.setStyle(_obj,{top:this.iTop+'px',marginTop:0})}else{_obj.style.marginTop='-'+_ih/2+'px'}M.setStyle(_obj,{position:'absolute',marginLeft:'-'+_iw/2+'px'})}else{if(_ih>=a){isLongPopBox=true;if(M.isInt(this.iTop)){_iTop=this.iTop}else{_iTop=oBody.scrollTop||oDel.scrollTop||0;_iTop=_iTop+50}M.setStyle(_obj,{position:'absolute',top:_iTop+'px',marginLeft:'-'+_iw/2+'px',marginTop:0});_iPh=_ih+_iTop;oOverLay.style.height=Math.max(_iPh,_imh)+'px'}else{isLongPopBox=false;isIE6||oDoc.documentMode<7?(_obj.style.position='absolute'):(_obj.style.position='fixed');M.setStyle(_obj,{marginTop:'-'+_ih/2+'px',marginLeft:'-'+_iw/2+'px'})}}fixOverlay=function(){if(_rt){clearTimeout(_rt)}_rt=setTimeout(function(){_that.fix_Overlay()},250)};M.addEvent(oWin,'resize',fixOverlay);if(isIE||isSafari){this.fix_Overlay();if(isIE6){this.fixIE6_Center();fixIECenter=function(){if(_st){clearTimeout(_st)}_st=setTimeout(function(){_that.fixIE6_Center()},250)};M.addEvent(oWin,'scroll',fixIECenter)}}}dialogOpen=true},fix_Overlay:function(){var a=M.getMaxW(),_h=M.getMaxH(),_wh=M.getWinHeight(),_obj=dialogElement,_ih,_iTop;if(oOverLay===undefined){oOverLay=M.g(OVERLAY_ID)}if(isIE9&&(!oDoc.documentMode||oDoc.documentMode>8)){a=a-17}_h=_h-3;try{_ih=_obj.offsetHeight}catch(e){_ih=this.iHeight;_obj=M.g(IFRAME_ID)}if(_ih>=_wh){isLongPopBox=true;if(M.isInt(this.iTop)){_iTop=this.iTop}else{_iTop=oBody.scrollTop||oDel.scrollTop;_iTop=_iTop+50}M.setStyle(_obj,{position:'absolute',top:_iTop+'px',marginTop:'0'})}else{isLongPopBox=false}if(isIE){oOverLay.style.width=a+'px'}oOverLay.style.height=_h+'px'},fixIE6_Center:function(){var a,_obj=dialogElement;if(!isLongPopBox){if(!this.fixed){a=oBody.scrollTop||oDel.scrollTop;dialogElement.style.marginTop=parseInt(a-_obj.offsetHeight/2,10)+'px'}}},ifrAutoHeight:function(a){var b,_dh,_win,_h;if(this.iHeight!='auto'){return}_win=dialogElement;try{b=_win.contentWindow.document.body.scrollHeight;_dh=_win.contentWindow.document.documentElement.scrollHeight;_h=Math.max(b,_dh);this.iHeight=win.height=_h}catch(e){}M.setStyle(_win,{marginTop:'-'+_win.offsetHeight/2+'px',marginLeft:'-'+_win.offsetWidth/2+'px'});this.fix_Overlay()},hide:function(p){var a=(typeof(p)==='object')?p:{},_callBack=this.onCloseCallback,_cancleCallback=a.cancleCallback||false,_isNoCloseOverLay=a.isNoCloseOverLay||false;if(oOverLay===undefined){oOverLay=M.g(OVERLAY_ID)}if(fixOverlay!==null){M.removeEvent(oWin,'resize',fixOverlay)}if(isIE6&&fixIECenter!=null){M.removeEvent(oWin,'scroll',fixIECenter)}if(fMsgClose!==null){M.removeEvent(oOverLay,'click',fMsgClose)}if(escCloseHandle!==null){M.removeEvent(oDoc,'keyup',escCloseHandle)}if(typeof(_callBack)==='function'&&!_cancleCallback){_callBack()}dialogOpen=false;if(!this.isNoAccessible){if(focusHandle!==null){if(oDoc.removeEventListener){oDoc.removeEventListener('focus',focusHandle,false)}else{oDoc.onfocus=null}if(oDoc.onfocus=focusHandle){oDoc.onfocus=null}}if(lastFocus&&lastFocus.offsetHeight>0){lastFocus.focus()}}if(dialogElement===null){switch(popType){case"message":dialogElement=M.g(MESSAGE_ID);case"iframe":dialogElement=M.g(IFRAME_ID);case"dialog":dialogElement=M.g(this.id);default:return}}dialogElement.style.display='none';if(!_isNoCloseOverLay){oOverLay.style.display='none'}bOverlay=false;return},overlay:function(){var a=M.getMaxH(),_zIndex=this.sPzIndex-1,_op=this.opacity,_it,_ib,_w;if(isIE){_it=parseInt(M.getStyle(oBody,'marginTop'),10);_ib=parseInt(M.getStyle(oBody,'marginBottom'),10);a=a+_it+_ib}oOverLay=oDoc.createElement('div');oOverLay.setAttribute('id',OVERLAY_ID);M.setStyle(oOverLay,{backgroundColor:this.bgcolor,borderTop:'1px solid transparent',position:'absolute',height:a+'px',zIndex:_zIndex,width:'100%',left:'0',top:'0'});if(isIE6||this.hasFrame){_w=M.getMaxW();oOverLay.style.width=_w+'px';oOverLay.innerHTML='<iframe style="position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;filter:alpha(opacity=0);z-index:9" src="javascript:void(0)"></iframe>'}if(isIE&&(!oDoc.documentMode||oDoc.documentMode<9)){oOverLay.style.filter='Alpha(opacity='+_op+')'}else{oOverLay.style.opacity=_op/100}bOverlay=true;return oBody.appendChild(oOverLay)}};showDialog=c;return c});/*  |xGv00|4ecbf2e4be58f6d273d6a45ca4e1d32b */